RewriteEngine On

# Si le fichier ou le dossier n'existe pas physiquement
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# Masquer les extensions de fichiers
RewriteBase /

# URLs propres pour les pages principales
RewriteRule ^projets/?$ projets.php [L,QSA]
RewriteRule ^contact/?$ contact.php [L,QSA]
RewriteRule ^mentions-legales/?$ mentions_legales.php [L,QSA]

# Réécriture pour les projets
RewriteRule ^projet/([0-9]+)/?$ template.php?id=$1 [L,QSA]

# Redirection vers le backoffice
RewriteRule ^back_access_mcce/?$ backoffice/login.php [L,QSA]

# Redirection de la page 404
ErrorDocument 404 /404.php

# Forcer HTTPS
RewriteCond %{HTTPS} off
RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

# Protection des fichiers sensibles
<FilesMatch "^\.">
    Order allow,deny
    Deny from all
</FilesMatch>

# Empêcher la navigation dans les répertoires
Options -Indexes
